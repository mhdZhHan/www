---
import { Image } from "astro:assets";

import Link from "@/components/ui/link.astro";
import Theme from "@/components/ui/theme.astro";

import StarBoy from "@/assets/star-boy.svg";
import Hamburger from "./ham-burger.astro";
import { cn } from "@/lib/utils";

type NavLink = {
  label: string;
  href: string;
};

type Props = {
  navLinks: NavLink[];
  class?: string;
};

const { navLinks, class: className, ...props } = Astro.props;
---

<header
  {...props}
  class={cn("py-2 fixed w-full top-0 z-50", className)}
  x-data="{ isOpen: false }"
>
  <div class="container max-w-5xl">
    <div
      class="border border-white/15 rounded-[27px] md:rounded-full bg-neutral-950/70 backdrop-blur"
    >
      <div
        class="grid grid-cols-2 md:grid-cols-3 items-center p-2 px-4 md:pr-2"
      >
        <Image
          src={StarBoy}
          alt="star-boy"
          width={120}
          height={36}
          class="h-9 md:h-auto w-auto"
        />

        <div class="hidden md:flex justify-center items-center">
          <nav class="flex gap-6 font-medium items-center">
            {
              navLinks.map((link) => (
                <Link href={link.href} class="text-primary">
                  {link.label}
                </Link>
              ))
            }
          </nav>
        </div>

        <div class="flex justify-end gap-4">
          <Hamburger />
          <Theme />
        </div>
      </div>

      <!-- Mobile Menu -->
      <div
        class="md:hidden mobile-menu overflow-hidden"
        x-show="isOpen"
        x-transition:enter="transition-all duration-300 ease-out"
        x-transition:enter-start="max-h-0 opacity-0"
        x-transition:enter-end="max-h-96 opacity-100"
        x-transition:leave="transition-all duration-300 ease-in"
        x-transition:leave-start="max-h-96 opacity-100"
        x-transition:leave-end="max-h-0 opacity-0"
        style="display: none;"
      >
        <div class="flex flex-col items-center gap-4 py-4">
          {
            navLinks.map((link) => (
              <Link
                href={link.href}
                class="text-white hover:text-gray-300 transition-colors"
                @click="isOpen = false"
              >
                {link.label}
              </Link>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</header>

<div class="fixed pb-[86px] md:pb-[98px] lg:pb-[130px]"></div>

<style>
  @media (min-width: 768px) {
    .mobile-menu {
      display: none !important;
    }
  }
</style>
